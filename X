--[[
    XeroLib - Complete UI Library
    Author: Bytox
]]

local XeroLib = {}
XeroLib.__index = XeroLib

-- –ò–∫–æ–Ω–∫–∏
XeroLib.Icons = {
    ["fallback"] = "rbxassetid://7733919881",
    ["home"] = "rbxassetid://7733914390",
    ["settings"] = "rbxassetid://7733911828",
    ["run"] = "rbxassetid://7733678330",
    ["stop"] = "rbxassetid://7733674153",
    ["check"] = "rbxassetid://7733715400",
    ["bell"] = "rbxassetid://7733911828",
    ["book"] = "rbxassetid://7733914390",
    ["bike"] = "rbxassetid://7733678330",
    ["banknote"] = "rbxassetid://7733674153",
}

-- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∫–æ–Ω–æ–∫
function XeroLib:LoadIcons()
    local pastefyURL = "https://pastefy.app/GJsDsU1d/raw"
    
    local success, result = pcall(function()
        local iconCode = game:HttpGet(pastefyURL, true)
        local iconLoader = loadstring(iconCode)
        if not iconLoader then return nil end
        
        local iconData = iconLoader()
        if type(iconData) == "table" then
            return iconData.Data or iconData
        end
        return nil
    end)
    
    if success and result then
        for name, assetId in pairs(result) do
            XeroLib.Icons[name] = assetId
        end
        print("–ò–∫–æ–Ω–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã")
        return true
    end
    return false
end

-- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏
function XeroLib:GetIcon(iconSource)
    if type(iconSource) == "string" and iconSource:find("^rbxassetid://") then
        return iconSource
    end
    
    if type(iconSource) == "number" then
        return "rbxassetid://" .. tostring(iconSource)
    end
    
    if type(iconSource) == "string" then
        local icon = XeroLib.Icons[iconSource]
        if icon then
            return icon
        elseif iconSource:match("^%d+$") then
            return "rbxassetid://" .. iconSource
        end
    end
    
    return nil
end

-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
XeroLib.NotifyType = {
    INFO = { Color = Color3.fromRGB(0, 120, 215), Icon = "üìò" },
    SUCCESS = { Color = Color3.fromRGB(0, 200, 83), Icon = "‚úÖ" },
    WARNING = { Color = Color3.fromRGB(255, 185, 0), Icon = "‚ö†Ô∏è" },
    ERROR = { Color = Color3.fromRGB(255, 60, 60), Icon = "‚ùå" }
}

-- –¢–µ–º—ã
XeroLib.Themes = {
    Dark = {
        Background = Color3.fromRGB(18, 18, 18),
        Foreground = Color3.fromRGB(28, 28, 28),
        Text = Color3.fromRGB(240, 240, 240),
        Accent = Color3.fromRGB(220, 220, 220),
        Button = Color3.fromRGB(38, 38, 38),
        ButtonHover = Color3.fromRGB(48, 48, 48),
        ToggleOn = Color3.fromRGB(0, 180, 0),
        ToggleOff = Color3.fromRGB(70, 20, 20),
        Slider = Color3.fromRGB(0, 150, 255),
        TabActive = Color3.fromRGB(40, 40, 40),
    }
}

XeroLib.CurrentTheme = XeroLib.Themes.Dark

-- –£—Ç–∏–ª–∏—Ç—ã
local function Create(class, properties)
    local object = Instance.new(class)
    
    if properties then
        for key, value in pairs(properties) do
            if key == "Parent" then
                object.Parent = value
            else
                object[key] = value
            end
        end
    end
    
    return object
end

local function ApplyCorners(obj, radius)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, radius)
    corner.Parent = obj
    return corner
end

-- –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
function XeroLib:New(title)
    local selfObj = setmetatable({}, XeroLib)
    
    -- –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∫–æ–Ω–æ–∫
    selfObj:LoadIcons()
    
    -- –°–æ–∑–¥–∞–µ–º ScreenGui
    selfObj.ScreenGui = Create("ScreenGui", {
        Parent = game:GetService("CoreGui"),
        Name = "XeroLib",
        ResetOnSpawn = false
    })
    
    -- –ì–ª–∞–≤–Ω—ã–π —Ñ—Ä–µ–π–º
    selfObj.MainFrame = Create("Frame", {
        Parent = selfObj.ScreenGui,
        Size = UDim2.new(0, 500, 0, 350),
        Position = UDim2.new(0.5, -250, 0.5, -175),
        BackgroundColor3 = selfObj.CurrentTheme.Background,
        BorderSizePixel = 0,
        Active = true,
        Draggable = true
    })
    
    ApplyCorners(selfObj.MainFrame, 8)
    
    -- –ó–∞–≥–æ–ª–æ–≤–æ–∫
    local titleBar = Create("Frame", {
        Parent = selfObj.MainFrame,
        Size = UDim2.new(1, 0, 0, 40),
        BackgroundColor3 = selfObj.CurrentTheme.Foreground,
        BorderSizePixel = 0
    })
    
    ApplyCorners(titleBar, 8)
    
    Create("TextLabel", {
        Parent = titleBar,
        Size = UDim2.new(1, -100, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        Text = title or "Xero Hub",
        TextColor3 = selfObj.CurrentTheme.Text,
        Font = Enum.Font.GothamBold,
        TextSize = 16,
        BackgroundTransparency = 1,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    -- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
    local closeBtn = Create("TextButton", {
        Parent = titleBar,
        Size = UDim2.new(0, 30, 0, 30),
        Position = UDim2.new(1, -40, 0.5, -15),
        Text = "√ó",
        TextColor3 = selfObj.CurrentTheme.Text,
        Font = Enum.Font.GothamBold,
        TextSize = 20,
        BackgroundColor3 = Color3.fromRGB(255, 60, 60),
        BorderSizePixel = 0,
        AutoButtonColor = false
    })
    
    ApplyCorners(closeBtn, 6)
    
    closeBtn.MouseButton1Click:Connect(function()
        selfObj.ScreenGui:Destroy()
    end)
    
    -- –°–ø–∏—Å–æ–∫ –≤–∫–ª–∞–¥–æ–∫
    selfObj.TabList = Create("Frame", {
        Parent = selfObj.MainFrame,
        Size = UDim2.new(0, 120, 1, -40),
        Position = UDim2.new(0, 0, 0, 40),
        BackgroundColor3 = selfObj.CurrentTheme.Background,
        BorderSizePixel = 0
    })
    
    -- –û–±–ª–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    selfObj.Content = Create("Frame", {
        Parent = selfObj.MainFrame,
        Position = UDim2.new(0, 120, 0, 40),
        Size = UDim2.new(1, -120, 1, -40),
        BackgroundColor3 = selfObj.CurrentTheme.Background,
        BorderSizePixel = 0
    })
    
    selfObj.Tabs = {}
    selfObj.TabButtons = {}
    
    return selfObj
end

-- –í–∫–ª–∞–¥–∫–∞
function XeroLib:AddTab(name, iconSource)
    local icon = self:GetIcon(iconSource)
    
    local button = Create("TextButton", {
        Parent = self.TabList,
        Size = UDim2.new(1, -10, 0, 35),
        Position = UDim2.new(0, 5, 0, (#self.TabButtons * 40) + 5),
        Text = name,
        BackgroundColor3 = self.CurrentTheme.Foreground,
        BorderSizePixel = 0,
        TextColor3 = self.CurrentTheme.Text,
        Font = Enum.Font.GothamBold,
        TextSize = 14,
        AutoButtonColor = false
    })
    
    ApplyCorners(button, 6)
    
    -- –î–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –µ—Å–ª–∏ –µ—Å—Ç—å
    if icon then
        local iconImage = Create("ImageLabel", {
            Parent = button,
            Size = UDim2.new(0, 20, 0, 20),
            Position = UDim2.new(0, 10, 0.5, -10),
            Image = icon,
            BackgroundTransparency = 1,
            ImageColor3 = self.CurrentTheme.Text
        })
        
        -- –°–æ–∑–¥–∞–µ–º UIPadding –¥–ª—è —Å–¥–≤–∏–≥–∞ —Ç–µ–∫—Å—Ç–∞
        local padding = Create("UIPadding", {
            Parent = button,
            PaddingLeft = UDim.new(0, 35)
        })
        
        button.TextXAlignment = Enum.TextXAlignment.Left
    else
        button.TextXAlignment = Enum.TextXAlignment.Center
    end
    
    -- –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–∫–∏
    local tabContent = Create("ScrollingFrame", {
        Parent = self.Content,
        Size = UDim2.new(1, 0, 1, 0),
        CanvasSize = UDim2.new(0, 0, 0, 0),
        BackgroundTransparency = 1,
        ScrollBarThickness = 8,
        ScrollBarImageColor3 = self.CurrentTheme.Accent,
        Visible = #self.Tabs == 0
    })
    
    -- Layout –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–∫–ª–∞–¥–∫–∏
    local listLayout = Create("UIListLayout", {
        Parent = tabContent,
        Padding = UDim.new(0, 10),
        SortOrder = Enum.SortOrder.LayoutOrder
    })
    
    local padding = Create("UIPadding", {
        Parent = tabContent,
        PaddingTop = UDim.new(0, 10),
        PaddingLeft = UDim.new(0, 10),
        PaddingRight = UDim.new(0, 10)
    })
    
    -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    listLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        tabContent.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y + 20)
    end)
    
    -- –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–∫–ª–∞–¥–∫—É
    self.Tabs[name] = tabContent
    self.TabButtons[name] = button
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
    button.MouseButton1Click:Connect(function()
        -- –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
        for _, content in pairs(self.Tabs) do
            content.Visible = false
        end
        
        -- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é
        tabContent.Visible = true
        
        -- –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç–∞ –∫–Ω–æ–ø–æ–∫
        for _, btn in pairs(self.TabButtons) do
            btn.BackgroundColor3 = self.CurrentTheme.Foreground
        end
        
        button.BackgroundColor3 = self.CurrentTheme.TabActive
    end)
    
    -- –ü–µ—Ä–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞
    if #self.Tabs == 1 then
        button.BackgroundColor3 = self.CurrentTheme.TabActive
    end
    
    return tabContent
end

-- –ö–Ω–æ–ø–∫–∞
function XeroLib:AddButton(tab, text, callback, iconSource)
    local icon = self:GetIcon(iconSource)
    
    local button = Create("TextButton", {
        Parent = tab,
        Size = UDim2.new(1, 0, 0, 35),
        Text = text,
        BackgroundColor3 = self.CurrentTheme.Button,
        BorderSizePixel = 0,
        TextColor3 = self.CurrentTheme.Text,
        Font = Enum.Font.GothamBold,
        TextSize = 14,
        AutoButtonColor = false
    })
    
    ApplyCorners(button, 6)
    
    -- –î–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É
    if icon then
        local iconImage = Create("ImageLabel", {
            Parent = button,
            Size = UDim2.new(0, 20, 0, 20),
            Position = UDim2.new(0, 10, 0.5, -10),
            Image = icon,
            BackgroundTransparency = 1,
            ImageColor3 = self.CurrentTheme.Text
        })
        
        local padding = Create("UIPadding", {
            Parent = button,
            PaddingLeft = UDim.new(0, 35)
        })
        
        button.TextXAlignment = Enum.TextXAlignment.Left
    else
        button.TextXAlignment = Enum.TextXAlignment.Center
    end
    
    -- –≠—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞–≤–µ–¥–µ–Ω–∏—è
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = self.CurrentTheme.ButtonHover
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = self.CurrentTheme.Button
    end)
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
    button.MouseButton1Click:Connect(function()
        if callback then
            callback()
        end
    end)
    
    return button
end

-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
function XeroLib:AddToggle(tab, text, default, callback, iconSource)
    local icon = self:GetIcon(iconSource)
    
    local frame = Create("Frame", {
        Parent = tab,
        Size = UDim2.new(1, 0, 0, 40),
        BackgroundColor3 = self.CurrentTheme.Foreground,
        BorderSizePixel = 0
    })
    
    ApplyCorners(frame, 6)
    
    -- –¢–µ–∫—Å—Ç
    local textLabel = Create("TextLabel", {
        Parent = frame,
        Size = UDim2.new(0.7, 0, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        Text = text,
        TextColor3 = self.CurrentTheme.Text,
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 14,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    -- –ò–∫–æ–Ω–∫–∞ –µ—Å–ª–∏ –µ—Å—Ç—å
    if icon then
        local iconImage = Create("ImageLabel", {
            Parent = frame,
            Size = UDim2.new(0, 20, 0, 20),
            Position = UDim2.new(0, 10, 0.5, -10),
            Image = icon,
            BackgroundTransparency = 1,
            ImageColor3 = self.CurrentTheme.Text
        })
        
        textLabel.Position = UDim2.new(0, 35, 0, 0)
        textLabel.Size = UDim2.new(0.65, 0, 1, 0)
    end
    
    -- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
    local toggleBtn = Create("TextButton", {
        Parent = frame,
        Size = UDim2.new(0, 60, 0, 25),
        Position = UDim2.new(1, -70, 0.5, -12.5),
        Text = default and "ON" or "OFF",
        TextColor3 = self.CurrentTheme.Text,
        BackgroundColor3 = default and self.CurrentTheme.ToggleOn or self.CurrentTheme.ToggleOff,
        Font = Enum.Font.GothamBold,
        TextSize = 12,
        BorderSizePixel = 0,
        AutoButtonColor = false
    })
    
    ApplyCorners(toggleBtn, 6)
    
    toggleBtn.MouseButton1Click:Connect(function()
        default = not default
        toggleBtn.Text = default and "ON" or "OFF"
        toggleBtn.BackgroundColor3 = default and self.CurrentTheme.ToggleOn or self.CurrentTheme.ToggleOff
        
        if callback then
            callback(default)
        end
    end)
    
    return frame
end

-- –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
function XeroLib:Test()
    local ui = self:New("XeroLib Test")
    
    local mainTab = ui:AddTab("–ì–ª–∞–≤–Ω–∞—è", "home")
    local settingsTab = ui:AddTab("–ù–∞—Å—Ç—Ä–æ–π–∫–∏", "settings")
    
    -- –ö–Ω–æ–ø–∫–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∏–∫–æ–Ω–æ–∫
    ui:AddButton(mainTab, "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç", function()
        print("–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω!")
    end, "run")
    
    ui:AddButton(mainTab, "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å", function()
        print("–°–∫—Ä–∏–ø—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!")
    end, "stop")
    
    -- –ü—Ä—è–º–æ–π rbxassetid
    ui:AddButton(mainTab, "–ü—Ä—è–º–∞—è –∏–∫–æ–Ω–∫–∞", function()
        print("–ü—Ä—è–º–∞—è –∏–∫–æ–Ω–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!")
    end, "rbxassetid://7733674153")
    
    -- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
    ui:AddToggle(mainTab, "–ê–≤—Ç–æ-—Ñ–∞—Ä–º", false, function(state)
        print("–ê–≤—Ç–æ-—Ñ–∞—Ä–º:", state)
    end, "check")
    
    -- –í—Ç–æ—Ä–∞—è –≤–∫–ª–∞–¥–∫–∞
    ui:AddButton(settingsTab, "–ò–Ω—Ñ–æ", function()
        print("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
    end, "bell")
    
    print("XeroLib —Ç–µ—Å—Ç —Å–æ–∑–¥–∞–Ω!")
    return ui
end

return XeroLib