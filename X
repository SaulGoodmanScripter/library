-- ZeroLib.lua - Полная версия
local ZeroLib = {}
ZeroLib.__index = ZeroLib

-- Вспомогательные функции
local function CreateElement(className, props)
    local element = Instance.new(className)
    for prop, value in pairs(props) do
        if element[prop] ~= nil then
            element[prop] = value
        end
    end
    return element
end

-- Основной метод Window
function ZeroLib:Window(config)
    config = config or {}
    
    local self = setmetatable({}, ZeroLib)
    
    -- Создаем GUI
    self.ScreenGui = CreateElement("ScreenGui", {
        Name = "ZeroLibUI",
        Parent = game.CoreGui,
        ResetOnSpawn = false
    })
    
    -- Главное окно
    self.Main = CreateElement("Frame", {
        Size = config.Size or UDim2.new(0, 500, 0, 400),
        Position = UDim2.new(0.5, -250, 0.5, -200),
        BackgroundColor3 = Color3.fromRGB(25, 25, 30),
        Parent = self.ScreenGui
    })
    
    CreateElement("UICorner", {CornerRadius = UDim.new(0, 12), Parent = self.Main})
    
    -- Верхняя панель
    self.Top = CreateElement("Frame", {
        Size = UDim2.new(1, 0, 0, 45),
        BackgroundColor3 = Color3.fromRGB(35, 35, 40),
        Parent = self.Main
    })
    
    -- Название
    local title = CreateElement("TextLabel", {
        Text = config.Name or "ZeroLib",
        Size = UDim2.new(1, -100, 1, 0),
        Position = UDim2.new(0, 15, 0, 0),
        TextColor3 = Color3.fromRGB(255, 255, 255),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 16,
        Parent = self.Top
    })
    
    -- Кнопка закрытия
    local closeBtn = CreateElement("TextButton", {
        Text = "X",
        Size = UDim2.new(0, 35, 0, 35),
        Position = UDim2.new(1, -40, 0.5, -17.5),
        AnchorPoint = Vector2.new(1, 0.5),
        BackgroundColor3 = Color3.fromRGB(220, 60, 60),
        TextColor3 = Color3.fromRGB(255, 255, 255),
        Font = Enum.Font.GothamBold,
        TextSize = 18,
        Parent = self.Top
    })
    
    CreateElement("UICorner", {CornerRadius = UDim.new(0, 8), Parent = closeBtn})
    
    closeBtn.MouseButton1Click:Connect(function()
        self.ScreenGui:Destroy()
    end)
    
    -- Контейнер для вкладок
    self.TabContainer = CreateElement("Frame", {
        Size = UDim2.new(1, -20, 1, -65),
        Position = UDim2.new(0, 10, 0, 55),
        BackgroundTransparency = 1,
        Parent = self.Main
    })
    
    -- Хранилище
    self.Tabs = {}
    
    -- Настройка перетаскивания
    local dragging = false
    local dragStart, startPos
    
    self.Top.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = self.Main.Position
        end
    end)
    
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            self.Main.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    game:GetService("UserInputService").InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    -- Горячая клавиша
    if config.Keybind then
        game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
            if not gameProcessed and input.KeyCode == config.Keybind then
                self.Main.Visible = not self.Main.Visible
            end
        end)
    end
    
    return self
end

-- Создание вкладки
function ZeroLib:CreateTab(name, iconId)
    local tab = {
        Name = name,
        Content = CreateElement("ScrollingFrame", {
            Size = UDim2.new(1, 0, 1, 0),
            BackgroundTransparency = 1,
            ScrollBarThickness = 6,
            ScrollBarImageColor3 = Color3.fromRGB(100, 100, 110),
            CanvasSize = UDim2.new(0, 0, 0, 0),
            Visible = false,
            Parent = self.TabContainer
        }),
        Elements = {}
    }
    
    local layout = CreateElement("UIListLayout", {
        Padding = UDim.new(0, 12),
        SortOrder = Enum.SortOrder.LayoutOrder,
        Parent = tab.Content
    })
    
    CreateElement("UIPadding", {
        PaddingTop = UDim.new(0, 15),
        PaddingLeft = UDim.new(0, 15),
        PaddingRight = UDim.new(0, 15),
        Parent = tab.Content
    })
    
    -- Обновление размера
    layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        tab.Content.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 20)
    end)
    
    -- Методы элементов
    
    -- 1. Кнопка
    function tab:AddButton(config)
        local btn = CreateElement("TextButton", {
            Text = config.Text or "Button",
            Size = UDim2.new(1, 0, 0, 38),
            BackgroundColor3 = Color3.fromRGB(60, 60, 70),
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 14,
            AutoButtonColor = false,
            LayoutOrder = #self.Elements + 1,
            Parent = self.Content
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(0, 8), Parent = btn})
        
        -- Анимация при наведении
        btn.MouseEnter:Connect(function()
            game:GetService("TweenService"):Create(btn, TweenInfo.new(0.2), {
                BackgroundTransparency = 0.1
            }):Play()
        end)
        
        btn.MouseLeave:Connect(function()
            game:GetService("TweenService"):Create(btn, TweenInfo.new(0.2), {
                BackgroundTransparency = 0
            }):Play()
        end)
        
        if config.Callback then
            btn.MouseButton1Click:Connect(config.Callback)
        end
        
        local api = {}
        function api:SetText(text) btn.Text = text end
        function api:SetVisible(visible) btn.Visible = visible end
        function api:SetCallback(callback)
            btn.MouseButton1Click:Connect(callback)
        end
        
        table.insert(self.Elements, api)
        return api
    end
    
    -- 2. Метка (Label)
    function tab:AddLabel(config)
        local label = CreateElement("TextLabel", {
            Text = config.Text or "Label",
            Size = UDim2.new(1, 0, 0, 30),
            BackgroundTransparency = 1,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 14,
            TextXAlignment = Enum.TextXAlignment.Left,
            LayoutOrder = #self.Elements + 1,
            Parent = self.Content
        })
        
        local api = {}
        function api:SetText(text) label.Text = text end
        function api:SetColor(color) label.TextColor3 = color end
        
        table.insert(self.Elements, api)
        return api
    end
    
    -- 3. Переключатель (Toggle)
    function tab:AddToggle(config)
        local toggleFrame = CreateElement("Frame", {
            Size = UDim2.new(1, 0, 0, 38),
            BackgroundTransparency = 1,
            LayoutOrder = #self.Elements + 1,
            Parent = self.Content
        })
        
        local label = CreateElement("TextLabel", {
            Text = config.Text or "Toggle",
            Size = UDim2.new(0.7, 0, 1, 0),
            BackgroundTransparency = 1,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 14,
            TextXAlignment = Enum.TextXAlignment.Left,
            Parent = toggleFrame
        })
        
        local state = config.Default or false
        local toggleBtn = CreateElement("TextButton", {
            Text = "",
            Size = UDim2.new(0, 50, 0, 25),
            Position = UDim2.new(1, 0, 0.5, 0),
            AnchorPoint = Vector2.new(1, 0.5),
            BackgroundColor3 = state and Color3.fromRGB(0, 200, 100) or Color3.fromRGB(100, 100, 110),
            AutoButtonColor = false,
            Parent = toggleFrame
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(0, 12), Parent = toggleBtn})
        
        local toggleCircle = CreateElement("Frame", {
            Size = UDim2.new(0, 19, 0, 19),
            Position = UDim2.new(state and 0.85 or 0.15, 0, 0.5, 0),
            AnchorPoint = Vector2.new(0.5, 0.5),
            BackgroundColor3 = Color3.fromRGB(255, 255, 255),
            Parent = toggleBtn
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(1, 0), Parent = toggleCircle})
        
        toggleBtn.MouseButton1Click:Connect(function()
            state = not state
            game:GetService("TweenService"):Create(toggleBtn, TweenInfo.new(0.2), {
                BackgroundColor3 = state and Color3.fromRGB(0, 200, 100) or Color3.fromRGB(100, 100, 110)
            }):Play()
            
            game:GetService("TweenService"):Create(toggleCircle, TweenInfo.new(0.2), {
                Position = UDim2.new(state and 0.85 or 0.15, 0, 0.5, 0)
            }):Play()
            
            if config.Callback then
                config.Callback(state)
            end
        end)
        
        local api = {}
        function api:GetValue() return state end
        function api:SetValue(value)
            state = value
            toggleBtn.BackgroundColor3 = state and Color3.fromRGB(0, 200, 100) or Color3.fromRGB(100, 100, 110)
            toggleCircle.Position = UDim2.new(state and 0.85 or 0.15, 0, 0.5, 0)
        end
        function api:Toggle()
            state = not state
            toggleBtn.BackgroundColor3 = state and Color3.fromRGB(0, 200, 100) or Color3.fromRGB(100, 100, 110)
            toggleCircle.Position = UDim2.new(state and 0.85 or 0.15, 0, 0.5, 0)
            if config.Callback then config.Callback(state) end
        end
        
        table.insert(self.Elements, api)
        return api
    end
    
    -- 4. Слайдер (Slider)
    function tab:AddSlider(config)
        local sliderFrame = CreateElement("Frame", {
            Size = UDim2.new(1, 0, 0, 50),
            BackgroundTransparency = 1,
            LayoutOrder = #self.Elements + 1,
            Parent = self.Content
        })
        
        local label = CreateElement("TextLabel", {
            Text = config.Text or "Slider",
            Size = UDim2.new(0.7, 0, 0, 20),
            BackgroundTransparency = 1,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 14,
            TextXAlignment = Enum.TextXAlignment.Left,
            Parent = sliderFrame
        })
        
        local valueLabel = CreateElement("TextLabel", {
            Text = tostring(config.Default or config.Min or 0),
            Size = UDim2.new(0.3, 0, 0, 20),
            Position = UDim2.new(1, 0, 0, 0),
            AnchorPoint = Vector2.new(1, 0),
            BackgroundTransparency = 1,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 14,
            TextXAlignment = Enum.TextXAlignment.Right,
            Parent = sliderFrame
        })
        
        local sliderTrack = CreateElement("Frame", {
            Size = UDim2.new(1, 0, 0, 6),
            Position = UDim2.new(0, 0, 1, -10),
            BackgroundColor3 = Color3.fromRGB(100, 100, 110),
            Parent = sliderFrame
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(1, 0), Parent = sliderTrack})
        
        local min = config.Min or 0
        local max = config.Max or 100
        local value = config.Default or min
        local step = config.Step or 1
        
        local sliderFill = CreateElement("Frame", {
            Size = UDim2.new((value - min) / (max - min), 0, 1, 0),
            BackgroundColor3 = Color3.fromRGB(0, 150, 255),
            Parent = sliderTrack
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(1, 0), Parent = sliderFill})
        
        local sliderButton = CreateElement("TextButton", {
            Text = "",
            Size = UDim2.new(0, 20, 0, 20),
            Position = UDim2.new((value - min) / (max - min), 0, 0.5, 0),
            AnchorPoint = Vector2.new(0.5, 0.5),
            BackgroundColor3 = Color3.fromRGB(255, 255, 255),
            AutoButtonColor = false,
            Parent = sliderTrack
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(1, 0), Parent = sliderButton})
        
        local dragging = false
        
        local function updateValue(mouseX)
            local relativeX = (mouseX - sliderTrack.AbsolutePosition.X) / sliderTrack.AbsoluteSize.X
            relativeX = math.clamp(relativeX, 0, 1)
            
            local newValue = min + (max - min) * relativeX
            if step > 0 then
                newValue = math.floor(newValue / step + 0.5) * step
            end
            newValue = math.clamp(newValue, min, max)
            
            if newValue ~= value then
                value = newValue
                valueLabel.Text = string.format(config.Format or "%d", value)
                sliderFill.Size = UDim2.new((value - min) / (max - min), 0, 1, 0)
                sliderButton.Position = UDim2.new((value - min) / (max - min), 0, 0.5, 0)
                
                if config.Callback then
                    config.Callback(value)
                end
            end
        end
        
        sliderButton.MouseButton1Down:Connect(function()
            dragging = true
        end)
        
        sliderTrack.MouseButton1Down:Connect(function(x, y)
            dragging = true
            updateValue(x)
        end)
        
        game:GetService("UserInputService").InputChanged:Connect(function(input)
            if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                updateValue(input.Position.X)
            end
        end)
        
        game:GetService("UserInputService").InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = false
            end
        end)
        
        local api = {}
        function api:GetValue() return value end
        function api:SetValue(newValue)
            value = math.clamp(newValue, min, max)
            valueLabel.Text = string.format(config.Format or "%d", value)
            sliderFill.Size = UDim2.new((value - min) / (max - min), 0, 1, 0)
            sliderButton.Position = UDim2.new((value - min) / (max - min), 0, 0.5, 0)
        end
        function api:SetRange(newMin, newMax)
            min = newMin
            max = newMax
            value = math.clamp(value, min, max)
            self:SetValue(value)
        end
        
        table.insert(self.Elements, api)
        return api
    end
    
    -- 5. Выпадающий список (Dropdown)
    function tab:AddDropdown(config)
        local dropdownFrame = CreateElement("Frame", {
            Size = UDim2.new(1, 0, 0, 38),
            BackgroundTransparency = 1,
            LayoutOrder = #self.Elements + 1,
            Parent = self.Content
        })
        
        local label = CreateElement("TextLabel", {
            Text = config.Text or "Dropdown",
            Size = UDim2.new(0.7, 0, 1, 0),
            BackgroundTransparency = 1,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 14,
            TextXAlignment = Enum.TextXAlignment.Left,
            Parent = dropdownFrame
        })
        
        local dropdownButton = CreateElement("TextButton", {
            Text = config.Default or config.Options[1] or "Select...",
            Size = UDim2.new(0, 120, 0, 30),
            Position = UDim2.new(1, 0, 0.5, 0),
            AnchorPoint = Vector2.new(1, 0.5),
            BackgroundColor3 = Color3.fromRGB(60, 60, 70),
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 12,
            AutoButtonColor = false,
            Parent = dropdownFrame
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(0, 6), Parent = dropdownButton})
        
        local options = config.Options or {}
        local selected = config.Default or options[1]
        local open = false
        
        local dropdownList = CreateElement("ScrollingFrame", {
            Size = UDim2.new(0, 120, 0, 0),
            Position = UDim2.new(1, 0, 1, 5),
            BackgroundColor3 = Color3.fromRGB(40, 40, 45),
            ScrollBarThickness = 4,
            Visible = false,
            Parent = dropdownFrame
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(0, 6), Parent = dropdownList})
        
        local listLayout = CreateElement("UIListLayout", {
            SortOrder = Enum.SortOrder.LayoutOrder,
            Parent = dropdownList
        })
        
        CreateElement("UIPadding", {
            PaddingTop = UDim.new(0, 5),
            PaddingBottom = UDim.new(0, 5),
            Parent = dropdownList
        })
        
        local function updateList()
            for _, child in pairs(dropdownList:GetChildren()) do
                if child:IsA("TextButton") then
                    child:Destroy()
                end
            end
            
            for _, option in ipairs(options) do
                local optionBtn = CreateElement("TextButton", {
                    Text = option,
                    Size = UDim2.new(1, -10, 0, 25),
                    Position = UDim2.new(0, 5, 0, 0),
                    BackgroundColor3 = Color3.fromRGB(50, 50, 60),
                    TextColor3 = Color3.fromRGB(255, 255, 255),
                    Font = Enum.Font.Gotham,
                    TextSize = 12,
                    AutoButtonColor = false,
                    Parent = dropdownList
                })
                
                CreateElement("UICorner", {CornerRadius = UDim.new(0, 4), Parent = optionBtn})
                
                optionBtn.MouseEnter:Connect(function()
                    game:GetService("TweenService"):Create(optionBtn, TweenInfo.new(0.2), {
                        BackgroundTransparency = 0.1
                    }):Play()
                end)
                
                optionBtn.MouseLeave:Connect(function()
                    game:GetService("TweenService"):Create(optionBtn, TweenInfo.new(0.2), {
                        BackgroundTransparency = 0
                    }):Play()
                end)
                
                optionBtn.MouseButton1Click:Connect(function()
                    selected = option
                    dropdownButton.Text = selected
                    
                    if config.Callback then
                        config.Callback(selected)
                    end
                    
                    open = false
                    dropdownList.Visible = false
                end)
            end
            
            dropdownList.CanvasSize = UDim2.new(0, 0, 0, #options * 30 + 10)
        end
        
        updateList()
        
        dropdownButton.MouseButton1Click:Connect(function()
            open = not open
            dropdownList.Visible = open
        end)
        
        local api = {}
        function api:GetValue() return selected end
        function api:SetValue(value)
            selected = value
            dropdownButton.Text = value
        end
        function api:SetOptions(newOptions)
            options = newOptions
            updateList()
        end
        function api:AddOption(option)
            table.insert(options, option)
            updateList()
        end
        function api:RemoveOption(option)
            for i, opt in ipairs(options) do
                if opt == option then
                    table.remove(options, i)
                    break
                end
            end
            updateList()
        end
        
        table.insert(self.Elements, api)
        return api
    end
    
    -- 6. Поле ввода (Textbox)
    function tab:AddTextbox(config)
        local textboxFrame = CreateElement("Frame", {
            Size = UDim2.new(1, 0, 0, 38),
            BackgroundTransparency = 1,
            LayoutOrder = #self.Elements + 1,
            Parent = self.Content
        })
        
        local label = CreateElement("TextLabel", {
            Text = config.Text or "Textbox",
            Size = UDim2.new(0.7, 0, 1, 0),
            BackgroundTransparency = 1,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 14,
            TextXAlignment = Enum.TextXAlignment.Left,
            Parent = textboxFrame
        })
        
        local textbox = CreateElement("TextBox", {
            Text = config.Default or "",
            Size = UDim2.new(0, 150, 0, 30),
            Position = UDim2.new(1, 0, 0.5, 0),
            AnchorPoint = Vector2.new(1, 0.5),
            BackgroundColor3 = Color3.fromRGB(40, 40, 45),
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 12,
            PlaceholderText = config.Placeholder or "Enter text...",
            PlaceholderColor3 = Color3.fromRGB(150, 150, 150),
            Parent = textboxFrame
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(0, 6), Parent = textbox})
        
        CreateElement("UIPadding", {
            PaddingLeft = UDim.new(0, 10),
            PaddingRight = UDim.new(0, 10),
            Parent = textbox
        })
        
        textbox.FocusLost:Connect(function(enterPressed)
            if config.Callback then
                config.Callback(textbox.Text, enterPressed)
            end
        end)
        
        local api = {}
        function api:GetValue() return textbox.Text end
        function api:SetValue(value) textbox.Text = value end
        function api:SetPlaceholder(text) textbox.PlaceholderText = text end
        
        table.insert(self.Elements, api)
        return api
    end
    
    -- 7. Секция (Section)
    function tab:AddSection(config)
        local section = CreateElement("Frame", {
            Size = UDim2.new(1, 0, 0, 30),
            BackgroundTransparency = 1,
            LayoutOrder = #self.Elements + 1,
            Parent = self.Content
        })
        
        local label = CreateElement("TextLabel", {
            Text = config.Text or "Section",
            Size = UDim2.new(1, 0, 1, 0),
            BackgroundTransparency = 1,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.GothamBold,
            TextSize = 16,
            TextXAlignment = Enum.TextXAlignment.Left,
            Parent = section
        })
        
        local divider = CreateElement("Frame", {
            Size = UDim2.new(1, 0, 0, 1),
            Position = UDim2.new(0, 0, 1, -1),
            BackgroundColor3 = Color3.fromRGB(100, 100, 110),
            BackgroundTransparency = 0.5,
            Parent = section
        })
        
        local api = {}
        function api:SetText(text) label.Text = text end
        
        table.insert(self.Elements, api)
        return api
    end
    
    -- 8. Изображение (Image)
    function tab:AddImage(config)
        local img = CreateElement("ImageLabel", {
            Image = config.Image or "rbxassetid://0",
            Size = config.Size or UDim2.new(1, 0, 0, 150),
            BackgroundTransparency = 1,
            LayoutOrder = #self.Elements + 1,
            Parent = self.Content
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(0, 8), Parent = img})
        
        local api = {}
        function api:SetImage(imageId)
            img.Image = "rbxassetid://" .. tostring(imageId)
        end
        function api:SetSize(size)
            img.Size = size
        end
        
        table.insert(self.Elements, api)
        return api
    end
    
    -- 9. Горячая клавиша (Keybind)
    function tab:AddKeybind(config)
        local keybindFrame = CreateElement("Frame", {
            Size = UDim2.new(1, 0, 0, 38),
            BackgroundTransparency = 1,
            LayoutOrder = #self.Elements + 1,
            Parent = self.Content
        })
        
        local label = CreateElement("TextLabel", {
            Text = config.Text or "Keybind",
            Size = UDim2.new(0.7, 0, 1, 0),
            BackgroundTransparency = 1,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 14,
            TextXAlignment = Enum.TextXAlignment.Left,
            Parent = keybindFrame
        })
        
        local keybind = config.Default or Enum.KeyCode.F
        local listening = false
        
        local keyButton = CreateElement("TextButton", {
            Text = tostring(keybind.Name):gsub("^%l", string.upper),
            Size = UDim2.new(0, 80, 0, 30),
            Position = UDim2.new(1, 0, 0.5, 0),
            AnchorPoint = Vector2.new(1, 0.5),
            BackgroundColor3 = Color3.fromRGB(60, 60, 70),
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.Gotham,
            TextSize = 12,
            AutoButtonColor = false,
            Parent = keybindFrame
        })
        
        CreateElement("UICorner", {CornerRadius = UDim.new(0, 6), Parent = keyButton})
        
        local function startListening()
            listening = true
            keyButton.Text = "..."
            keyButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
        end
        
        local function stopListening(newKey)
            listening = false
            keybind = newKey or keybind
            keyButton.Text = tostring(keybind.Name):gsub("^%l", string.upper)
            keyButton.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
        end
        
        keyButton.MouseButton1Click:Connect(function()
            if not listening then
                startListening()
            end
        end)
        
        game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
            if gameProcessed then return end
            
            if listening then
                if input.UserInputType == Enum.UserInputType.Keyboard then
                    stopListening(input.KeyCode)
                    if config.Callback then
                        config.Callback(input.KeyCode)
                    end
                end
            elseif input.KeyCode == keybind then
                if config.Callback then
                    config.Callback(keybind)
                end
            end
        end)
        
        local api = {}
        function api:GetKey() return keybind end
        function api:SetKey(newKey)
            keybind = newKey
            keyButton.Text = tostring(keybind.Name):gsub("^%l", string.upper)
        end
        
        table.insert(self.Elements, api)
        return api
    end
    
    -- 10. Параграф (Paragraph)
    function tab:AddParagraph(config)
        local paragraphFrame = CreateElement("Frame", {
            Size = UDim2.new(1, 0, 0, 0),
            BackgroundTransparency = 1,
            LayoutOrder = #self.Elements + 1,
            Parent = self.Content
        })
        
        local title = CreateElement("TextLabel", {
            Text = config.Title or "Title",
            Size = UDim2.new(1, 0, 0, 25),
            BackgroundTransparency = 1,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            Font = Enum.Font.GothamBold,
            TextSize = 16,
            TextXAlignment = Enum.TextXAlignment.Left,
            Parent = paragraphFrame
        })
        
        local content = CreateElement("TextLabel", {
            Text = config.Content or "Content",
            Size = UDim2.new(1, 0, 0, 0),
            Position = UDim2.new(0, 0, 0, 25),
            BackgroundTransparency = 1,
            TextColor3 = Color3.fromRGB(200, 200, 200),
            Font = Enum.Font.Gotham,
            TextSize = 14,
            TextWrapped = true,
            TextXAlignment = Enum.TextXAlignment.Left,
            Parent = paragraphFrame
        })
        
        -- Авторазмер
        content:GetPropertyChangedSignal("TextBounds"):Connect(function()
            content.Size = UDim2.new(1, 0, 0, content.TextBounds.Y)
            paragraphFrame.Size = UDim2.new(1, 0, 0, 25 + content.TextBounds.Y)
        end)
        
        local api = {}
        function api:SetTitle(text) title.Text = text end
        function api:SetContent(text) content.Text = text end
        
        table.insert(self.Elements, api)
        return api
    end
    
    -- Сохраняем и показываем если первая
    table.insert(self.Tabs, tab)
    
    if #self.Tabs == 1 then
        tab.Content.Visible = true
    end
    
    return tab
end

-- Метод для уведомлений
function ZeroLib:Notify(config)
    local notify = CreateElement("Frame", {
        Size = UDim2.new(0, 300, 0, 0),
        Position = UDim2.new(1, -320, 1, -10),
        AnchorPoint = Vector2.new(1, 1),
        BackgroundColor3 = Color3.fromRGB(30, 30, 40),
        Parent = self.ScreenGui
    })
    
    CreateElement("UICorner", {CornerRadius = UDim.new(0, 8), Parent = notify})
    
    CreateElement("UIStroke", {
        Color = Color3.fromRGB(100, 100, 110),
        Thickness = 1,
        Parent = notify
    })
    
    CreateElement("UIPadding", {
        PaddingTop = UDim.new(0, 10),
        PaddingBottom = UDim.new(0, 10),
        PaddingLeft = UDim.new(0, 15),
        PaddingRight = UDim.new(0, 15),
        Parent = notify
    })
    
    local title = CreateElement("TextLabel", {
        Text = config.Title or "Notification",
        Size = UDim2.new(1, 0, 0, 20),
        BackgroundTransparency = 1,
        TextColor3 = Color3.fromRGB(255, 255, 255),
        Font = Enum.Font.GothamBold,
        TextSize = 14,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = notify
    })
    
    local message = CreateElement("TextLabel", {
        Text = config.Message or "Message",
        Size = UDim2.new(1, 0, 0, 0),
        Position = UDim2.new(0, 0, 0, 25),
        BackgroundTransparency = 1,
        TextColor3 = Color3.fromRGB(200, 200, 200),
        Font = Enum.Font.Gotham,
        TextSize = 12,
        TextWrapped = true,
        TextXAlignment = Enum.TextXAlignment.Left,
        Parent = notify
    })
    
    message:GetPropertyChangedSignal("TextBounds"):Connect(function()
        notify.Size = UDim2.new(0, 300, 0, 45 + message.TextBounds.Y)
        message.Size = UDim2.new(1, 0, 0, message.TextBounds.Y)
    end)
    
    game:GetService("TweenService"):Create(notify, TweenInfo.new(0.3), {
        Size = UDim2.new(0, 300, 0, 80)
    }):Play()
    
    task.delay(config.Duration or 5, function()
        game:GetService("TweenService"):Create(notify, TweenInfo.new(0.3), {
            Size = UDim2.new(0, 300, 0, 0)
        }):Play()
        task.wait(0.3)
        notify:Destroy()
    end)
end

return ZeroLib